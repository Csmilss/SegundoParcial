### ===========================================
### API Tests - Soul Society Red Social Gamer
### Backend: http://localhost:4000
### ===========================================

### Variables
@baseUrl = http://localhost:4000/api
@usuarioId = 1
@publicacionId = 1
@comentarioId = 1


### ===========================================
### USUARIOS - CRUD Completo
### ===========================================

### 1. GET - Obtener todos los usuarios
GET {{baseUrl}}/usuarios
Accept: application/json

###

### 2. GET - Obtener un usuario específico por ID
GET {{baseUrl}}/usuarios/{{usuarioId}}
Accept: application/json

###

### 3. POST - Crear un nuevo usuario
POST {{baseUrl}}/usuarios
Content-Type: application/json

{
  "nombre": "Solaire of Astora",
  "correo": "solaire@darksouls.com",
  "ciudad": "Anor Londo"
}

###

### 4. POST - Crear usuario con email duplicado (Error 409)
POST {{baseUrl}}/usuarios
Content-Type: application/json

{
  "nombre": "Otro Usuario",
  "correo": "solaire@darksouls.com",
  "ciudad": "Firelink Shrine"
}

###

### 5. POST - Crear usuario sin campos requeridos (Error 400)
POST {{baseUrl}}/usuarios
Content-Type: application/json

{
  "nombre": "Usuario Incompleto"
}

###

### 6. PUT - Actualizar un usuario
PUT {{baseUrl}}/usuarios/{{usuarioId}}
Content-Type: application/json

{
  "nombre": "Ashen One Updated",
  "ciudad": "Lothric Castle"
}

###

### 7. PUT - Actualizar usuario inexistente (Error 404)
PUT {{baseUrl}}/usuarios/999
Content-Type: application/json

{
  "nombre": "Usuario Fantasma",
  "ciudad": "Nowhere"
}

###

### 8. DELETE - Eliminar un usuario
DELETE {{baseUrl}}/usuarios/5
Accept: application/json

###

### 9. DELETE - Eliminar usuario inexistente (Error 404)
DELETE {{baseUrl}}/usuarios/999
Accept: application/json

###


### ===========================================
### PUBLICACIONES - CRUD Completo
### ===========================================

### 10. GET - Obtener publicaciones de un usuario
GET {{baseUrl}}/usuarios/{{usuarioId}}/publicaciones
Accept: application/json

###

### 11. GET - Obtener publicaciones de usuario inexistente (Error 404)
GET {{baseUrl}}/usuarios/999/publicaciones
Accept: application/json

###

### 12. GET - Obtener una publicación específica
GET {{baseUrl}}/publicaciones/{{publicacionId}}
Accept: application/json

###

### 13. GET - Obtener publicación inexistente (Error 404)
GET {{baseUrl}}/publicaciones/999
Accept: application/json

###

### 14. POST - Crear una nueva publicación para un usuario
POST {{baseUrl}}/usuarios/{{usuarioId}}/publicaciones
Content-Type: application/json

{
  "titulo": "Guía para derrotar a Nameless King",
  "cuerpo": "El Nameless King es uno de los bosses más difíciles. La clave está en mantener la distancia durante la primera fase y ser paciente. En la segunda fase, rola hacia su costado derecho y ataca después de su combo de 3 golpes."
}

###

### 15. POST - Crear publicación sin campos requeridos (Error 400)
POST {{baseUrl}}/usuarios/{{usuarioId}}/publicaciones
Content-Type: application/json

{
  "titulo": "Publicación sin cuerpo"
}

###

### 16. POST - Crear publicación para usuario inexistente (Error 404)
POST {{baseUrl}}/usuarios/999/publicaciones
Content-Type: application/json

{
  "titulo": "Publicación huérfana",
  "cuerpo": "Este usuario no existe"
}

###

### 17. PUT - Actualizar una publicación
PUT {{baseUrl}}/publicaciones/{{publicacionId}}
Content-Type: application/json

{
  "titulo": "Mi primera victoria contra un boss [ACTUALIZADO]",
  "cuerpo": "Actualización: Ahora también derroté a Midir usando esta estrategia!"
}

###

### 18. PUT - Actualizar publicación inexistente (Error 404)
PUT {{baseUrl}}/publicaciones/999
Content-Type: application/json

{
  "titulo": "No existe",
  "cuerpo": "Esta publicación no existe"
}

###

### 19. DELETE - Eliminar una publicación
DELETE {{baseUrl}}/publicaciones/3
Accept: application/json

###

### 20. DELETE - Eliminar publicación inexistente (Error 404)
DELETE {{baseUrl}}/publicaciones/999
Accept: application/json

###


### ===========================================
### COMENTARIOS - CRUD Completo
### ===========================================

### 21. GET - Obtener comentarios de una publicación
GET {{baseUrl}}/publicaciones/{{publicacionId}}/comentarios
Accept: application/json

###

### 22. GET - Obtener comentarios de publicación inexistente (Error 404)
GET {{baseUrl}}/publicaciones/999/comentarios
Accept: application/json

###

### 23. POST - Crear un comentario en una publicación
POST {{baseUrl}}/publicaciones/{{publicacionId}}/comentarios
Content-Type: application/json

{
  "nombre": "Siegmeyer of Catarina",
  "correo": "siegmeyer@catarina.com",
  "cuerpo": "¡Hmm! Excelente estrategia, amigo mío. Definitivamente intentaré esto en mi próxima batalla."
}

###

### 24. POST - Crear comentario con email inválido (Error 400)
POST {{baseUrl}}/publicaciones/{{publicacionId}}/comentarios
Content-Type: application/json

{
  "nombre": "Comentarista sin email",
  "correo": "email-invalido",
  "cuerpo": "Este comentario tiene un email mal formado"
}

###

### 25. POST - Crear comentario sin campos requeridos (Error 400)
POST {{baseUrl}}/publicaciones/{{publicacionId}}/comentarios
Content-Type: application/json

{
  "nombre": "Solo nombre"
}

###

### 26. POST - Crear comentario en publicación inexistente (Error 404)
POST {{baseUrl}}/publicaciones/999/comentarios
Content-Type: application/json

{
  "nombre": "Patches",
  "correo": "patches@unbreakable.com",
  "cuerpo": "Comentario en publicación que no existe"
}

###

### 27. DELETE - Eliminar un comentario
DELETE {{baseUrl}}/comentarios/2
Accept: application/json

###

### 28. DELETE - Eliminar comentario inexistente (Error 404)
DELETE {{baseUrl}}/comentarios/999
Accept: application/json

###


### ===========================================
### TESTS DE ERRORES ESPECÍFICOS
### ===========================================

### 29. Error 400 - Campos vacíos
POST {{baseUrl}}/usuarios
Content-Type: application/json

{
  "nombre": "",
  "correo": "",
  "ciudad": ""
}

###

### 30. Error 404 - Ruta inexistente
GET {{baseUrl}}/ruta-inexistente
Accept: application/json

###

### 31. Error 409 - Conflicto (email duplicado)
# Primero crear usuario
POST {{baseUrl}}/usuarios
Content-Type: application/json

{
  "nombre": "Test Conflict",
  "correo": "conflict@test.com",
  "ciudad": "Test City"
}

# Luego intentar crear otro con mismo email
###
POST {{baseUrl}}/usuarios
Content-Type: application/json

{
  "nombre": "Test Conflict 2",
  "correo": "conflict@test.com",
  "ciudad": "Another City"
}

###

### 32. Error 500 - Para probar, detener el backend e intentar cualquier request
# Ejemplo: Ctrl+C en terminal del backend, luego ejecutar:
GET {{baseUrl}}/usuarios
Accept: application/json


